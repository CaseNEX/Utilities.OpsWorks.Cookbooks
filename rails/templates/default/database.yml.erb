<% (['development', 'production'] + [@environment]).uniq.each do |env| -%>
<% @database.each do |db| -%>

<%= "#{db[:name].to_s.inspect}_" if db[:name] %><%= env %>:
  adapter: <%= db[:adapter].to_s.inspect %>
  database: <%= db[:database].to_s.inspect %>
  encoding: utf8
  host: <%= (db[:host] || 'localhost').to_s.inspect %>
  username: <%= @db[:username].to_s.inspect %>
  password: <%= db[:password].to_s.inspect %>
  reconnect: <%= db[:reconnect] ? 'true' : 'false' %>
<% if db[:port] -%>
  port: <%= db[:port].to_i.inspect %>
<% end -%>
<% end %>
<% end %>
